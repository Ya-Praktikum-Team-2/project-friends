## Разработка проекта

[fork]: https://github.com/Ya-Praktikum-Team-2/test-teamwork/fork
[pr]: https://github.com/Ya-Praktikum-Team-2/test-teamwork/compare
[node]: https://nodejs.org/ru/
[js-style]: https://github.com/airbnb/javascript
[css-style]: https://github.com/stylelint/stylelint-config-standard


### Подготовка локальной копии проекта:

1. [Создать форк][fork] проекта и клонировать репозиторий на локальный компьютер
1. Добавить апстрим в проект: `git remote add upstream https://github.com/Ya-Praktikum-Team-2/project-friends.git`
1. Создать ветку `main` если её не существует: `git branch main`. Если команда выдаёт ошибку значит ветка `main` уже существует и всё нормально.

После этого будут существовать три репозитория: `origin` - форк, созданный в первом шаге, локальный - склонированная на компьютер копия `origin`,  и `upstream` - репозиторий для командной работы. В `upstream` будет невозможно запушить код напрямую. Для этого нужно будет пушить ветки из локального репозитория в `origin` и из них создавать пулл реквесты.

### Работа с кодом:

Работа с кодом будет проходить в отдельных ветках, а `main` должна оставаться без изменений и использоваться только для обновления кода с `upstream`. Для создания отдельной ветки и начала работы в ней необходимо:

1. Перейти в ветку `main`: `git checkout main`
1. Добавить последние изменения с апстрима: `git pull upstream devel`
1. Создать отдельную ветку: `git checkout -b my-branch-name`, где вместо `my-branch-name` ввести название ветки, которая примерно отражает что за работа проводится.
1. Вносить необходимые изменения в этой ветке, не забывая добавлять новые файлы при помощи `git add -A` и коммитить изменения при помощи команды `git commit -m "<Название коммита>"`. Необходимо выбирать осмысленное название коммита, подчёркивающее что именно делает изменение в нём.

### Создание пулл-реквеста:
Для того чтобы отправить свои изменения в `upstream` необходимо создать пулл-реквест. Для этого в ветке с изменённым кодом:

1. Убедиться что весь изменённый код находится внутри коммитов.
1. Запушить код в свой форк `git push origin my-branch-name`, где вместо `my-branch-name` ввести название рабочей ветки
1. Создать пулл-реквест в ветку `devel` апстрима [submit a pull request][pr]
1. Подождать пока пройдут автоматические тесты и кто-нибудь проверит изменения
    * Пока пулл реквест не принят, можно добавлять новые коммиты в ветку из которого его создали и они автоматически появятся в пулл реквесте.
1. После того как пулл реквест будет принят, гитхаб предложит удалить ветку, однако ветка будет удалена только в репозитории `origin`.
1. Чтобы удалить ветку в локальном репозитории, необходимо выполнить команду `git branch -D my-branch-name`, где вместо `my-branch-name` ввести название ненужной ветки

### Обновление ветки с `upstream`:
Для того чтобы обновить ветку с кодом и добавить последние изменения от других участников команды из `upstream` необходимо:

1. Убедиться что весь изменённый код находится внутри коммитов.
1. Перейти в ветку `main`: `git checkout main`
1. Добавить последние изменения с апстрима: `git pull upstream devel`
    * Если команда выводит ошибку, то нужно очистить `main` от каких-либо изменений при помощи команд (⚠️внимание, если в `main` есть важные изменения, то они будут уничтожены): `git fetch upstream` и затем `git reset --hard upstream/main`.
1. Перейти в рабочую ветку: `git checkout my-branch-name`, где вместо `my-branch-name` ввести название ветки
1. Замержить код из `main`: `git merge main`
1. Если есть конфликты, то
    1. Исправить конфликты
    1. Выполнить `git add .` для добавления новых файлов
    1. Создать коммит с исправлением `git commit -m "Fix merge conflicts"`
1. Запушить изменения `git push origin my-branch-name`, где вместо `my-branch-name` ввести название ветки

### Запуск линтера (опционально)

В проект включены линтеры, которые проверяют что код соответствует некоторым правилам. При каждом пулл-реквесте линтер автоматически проверяет код, но можно запустить его и локально на своём компьютере.

Про правила можно прочитать здесь:

* [Правила для JavaScript][js-style]
* [Правила для CSS][css-style]


Для локальной установки линтера:

1. Скачать и установить [node.js][node] (можно любую, но предпочтительней LTS)
1. Запустить в каталоге проекта `npm install`

Теперь для проверки проекта линтером достаточно запустить `npm run lint` в консоли в каталоге с проектом.
